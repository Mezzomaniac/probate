{% extends "base.html" %}

{% block content %}
<h1>Welcome to Probate Search WA</h1>
<hr>
<div id="intro">
    <p id="creator">
        Created 2021 by Jeremy Thomas London
    </p>
    <p id="version">
        v {{ config['VERSION'] }}
    </p>
    <address>
        Please report any bugs to <a href="mailto:{{ config['MAIL_USERNAME'] }}?subject=Probate%20Search">{{ config['MAIL_USERNAME'] }}</a>
    </address>
    <p id="changelog"></p>
</div>
<hr>
<h2>Search form</h2>
<div id="search">
    <p>Not case sensitive. You may use "%" as a wildcard.</p>
    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        {% for field in form %}
        {% if field.type not in ("CSRFTokenField", "SubmitField") %}
        <div id="{{ field.id }}-div" class="field">
            {{ field.label }}<br>
            {{ field(size=32) }}<br>
            {% for error in field.errors %}
            <span class="error">{{ error|safe }}</span>
            {% endfor %}
        </div>
        {% endif %}
        {% endfor %}
        <p>
            {{ form.submit() }}
        </p>
    </form>
</div>
{% if results %}
<h2>Search results</h2>
<div id="results">
    {% include "results.html" %}
</div>
{% endif %}
<aside><p>
    Last database update: 
    {% if last_update %}
    <time datetime="{{ last_update }}">{{ last_update }}</time>
    {% else %}
    None
    {% endif %}
</p></aside>
{% endblock %}
